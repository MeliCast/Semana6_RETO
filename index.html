<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <!-- nuestros estilos -->
    <link rel="stylesheet" href="./css/estilos.css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="./js/main.js"></script>

  </head>
  <body>
    <div class="raiz">
      <nav>
        <h1>CodiGO RestoBar</h1>
      </nav>
      <div class="principal">
        <nav class="menu">
          <ul>
            <li>Platos</li>
            <li>Bebidas</li>
          </ul>
        </nav>
        <main id="contenido">
          <!-- aqui es donde irán nuestros productos-cards -->



                <!-- <div class="tarjeta">
                  <div class="imagen">
                    <img src="https://picsum.photos/400">
                  </div>

                  <div class="texto">
                    <h4>Ceviche</h4>
                    <p>Lorem ipsum dolor sit amet consectetur.</p>
                    <div class="precio">
                      <span>S/ 30</span>
                      <button class="btn-agregar">
                        Agregar
                      </button>
                    </div>
                  </div>
                </div> -->





                <script>
                var sum = 0;

                $.each( listaPlatillos, function(i, item) {

                  document.write('<div class="tarjeta">');
                    document.write('<div class="imagen">');
                      document.write('<img src="'+ item['imagen'] +'">');
                      document.write('</div>');
                      document.write('<div class="texto">');
                        document.write('<h4>'+ item['nombre']+'</h4>');
                        document.write('<p>'+ item['descripcion'] +'.</p>');
                        document.write('<div class="precio">');
                          document.write('<span>S/ '+ item['precio'] +'</span>');
                          document.write('<button id="'+i+'" class="btn-agregar"> Agregar </button>');
                      document.write('</div>');
                    document.write('</div>');
                  document.write('</div>');
          

                });


                 const botones = document.querySelectorAll(".btn-agregar");


                 

                 const cuandoSeHaceClick = function (evento) {
                 
                      var x = this.id;

                      var item = listaPlatillos[x].nombre;
                      var can = 1 ;//listaPlatillos[x].stock;
                      var pre = listaPlatillos[x].precio;
                      var tot = can * pre;
      
                      document.getElementById("tablaprueba").insertRow(-1).innerHTML = '<td>'+ item +'</td> <td>'+ can +'</td> <td>'+ pre +'</td> <td>'+ tot +'</td>';

                      sum = sum + tot;

                      document.getElementById("total").innerHTML= sum;


                }

           


                botones.forEach(boton => {
               
                  boton.addEventListener("click", cuandoSeHaceClick);

                });




                document.getElementById("btn-pagar").onclick = function () {
                  
                      localStorage.setItem("total", sum);
                  
                }


                //console.log(listaPlatillos[0].nombre);

                //  document.getElementsByName("boton").onclick = function () {
                //   console.log(this.id);
                //  }



                //  var x = document.getElementsByClassName("btn-agregar");
                // x[0].style.backgroundColor = "red";



                </script>

          
        </main>
      </div>
    </div>

    <div class="carrito">


      <p id="fecha"></p>
      <table id="tablaprueba">
        <!-- table-head -->
        <thead>
          <tr>
            <th>Item</th>
            <th>Cantidad</th>
            <th>P.Unit.</th>
            <th>SubTotal</th>
          </tr>


    
          <!-- <tr>
            <td>Pingüinito</td>
            <td>5</td>
            <td>12</td>
            <td>60</td>
          </tr>   -->

        </thead>
        <!-- table-body -->
        <tbody id="tbody-carrito">
          <!-- items de la boleta -->
        </tbody>
      </table>




      <div class="resumen">
        <table>
          <tbody id="tbody-resumen">
            <tr>
              <td>TOTAL</td><td><label id="total">0</label></td>
            </tr>
          </tbody>
        </table>
        <button id="btn-pagar">
          PAGAR ORDEN
        </button>
      </div>
    </div>

    <!-- <script src="./js/main.js"></script> -->
  </body>
</html>